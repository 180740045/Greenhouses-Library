

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Control Systems &mdash; Greenhouses  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Greenhouses  documentation" href="index.html"/>
        <link rel="next" title="Examples" href="examples.html"/>
        <link rel="prev" title="Flows" href="flows.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Greenhouses
          

          
            
            <img src="_static/Greenhouses_logo.jpg" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="flows.html">Flows</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Control Systems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#set-points-definition">Set-points definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supplementary-lighting">Supplementary lighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows-aperture">Windows aperture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#thermal-screen-closure">Thermal screen closure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Greenhouses</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Control Systems</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/control.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="control-systems">
<span id="control"></span><h1>Control Systems<a class="headerlink" href="#control-systems" title="Permalink to this headline">¶</a></h1>
<p>Greenhouses have high requirements on indoor climate control. The climate controller adjusts
heating, ventilation and CO<sub>2</sub> supply to attain the desired climate. In this work, several control
systems are developed, based on the control strategies proposed in the literature. In the library, depending on the nature of the strategies, two implementation approaches are distinguished:</p>
<ul class="simple">
<li>State graphs: using the <em>StateGraph</em> package from the Modelica Standard Library, and</li>
<li>Proportional-integral-derivative (PID) controllers: using an ISA PID controller with anti-windup (<em>PID</em> model in the <em>ControlSystems</em> package of the Greenhouses Lirary), adapted from <a class="reference internal" href="index.html#quoilin-thermocycle-2014" id="id1">[QDW+14]</a>).</li>
</ul>
<p>The presented control strategies have been tested in <a class="reference internal" href="index.html#altes-buch-modeling-2018-1" id="id2">[ABL18]</a>, where  several climate simulation results are presented and compared for three different cases.</p>
<div class="section" id="set-points-definition">
<h2>Set-points definition<a class="headerlink" href="#set-points-definition" title="Permalink to this headline">¶</a></h2>
<p>The determination of set-points is at the top of the functionality of the climate controller.
Temperature set-points differ from day-time to night-time and are sometimes adapted to the
level of radiation. CO<sub>2</sub> is supplied during daylight to enhance photosynthesis. As measured in
xx Nilsen et al., 1983, different combinations of CO<sub>2</sub> concentration and air temperature lead to
different photosynthesis rates. Although a sharp reduction in photosynthesis is measured at
non-optimal temperatures, similar values are measured for close-to-optimal temperatures (i.e.
optimal temperature ±5ºC). Therefore, temperature and CO<sub>2</sub> set-points can be optimized not
only in terms of crop growth but also in terms of energy use. In fact, the definition of
temperature set-points for optimal crop growth and energy use has been the subject of a
substantial literature (e.g. <a class="reference internal" href="index.html#elings-multiple-day-2006" id="id3">[EZJ+06]</a>; <a class="reference internal" href="index.html#aaslyng-intelligrow-2003" id="id4">[ALER03]</a>; <a class="reference internal" href="index.html#dieleman-energy-2006" id="id5">[DME+06]</a>;
<a class="reference internal" href="index.html#dieleman-optimisation-2005" id="id6">[DMM+05]</a>). However, since this work does not focus on climate set-points
optimization, no innovative control is proposed. Instead, the strategy proposed in <a class="reference internal" href="index.html#aaslyng-intelligrow-2003" id="id7">[ALER03]</a> is implemented in <em>Python</em> and the set-points are inputted as a time-series “.txt” file in
the model. This strategy consists in minimizing energy consumption while maintaining a crop
growth close to the maximal growth rate by:</p>
<ul class="simple">
<li>computing a 2-D array of photosynthesis rates for a range of CO<sub>2</sub> and temperature values at a given PAR,</li>
<li>selecting the pairs of CO<sub>2</sub> and temperature that ensure at least 80% of the photosynthesis rate (being 100% the maximum value of the 2-D array), and</li>
<li>defining the temperature and CO<sub>2</sub> set-point (<span class="math notranslate nohighlight">\(T_{Air,SP}\)</span> and <span class="math notranslate nohighlight">\(CO2_{Air,SP,th}\)</span>) as the pair in the previous selection with the lowest temperature.</li>
</ul>
<p>In this work, a PI controller is responsible for adjusting the heating power output by varying
the mass flow rate of the heating pipes according to the difference between the air temperature
set-point and the actual value. The control strategy for CO<sub>2</sub> is based on a maximal supply rate,
defined by the capacity of the CO<sub>2</sub> enrichment system. This capacity is function of the CO<sub>2</sub>
source, which is commonly a combination of fossil fuel combustion gases and CO<sub>2</sub> stored in
liquid phase. While respecting the enrichment capacity, the supply rate is adapted to attain the
CO<sub>2</sub> set-point. However, in high ventilation conditions, CO<sub>2</sub> enrichment is commonly reduced
due to the high exchange rate to the outside air. To take this into account, the theoretical CO<sub>2</sub>
set-point proposed by the control strategy is modified so that it decreases proportionally with
the increase in the ventilation rate. This is done as defined by:</p>
<div class="math notranslate nohighlight">
\[CO2_{Air,SP} = f(u_{vent}) \cdot \left( CO2_{Air,SP,th} - CO2_{Ext}^{Min} \right) + CO2_{Ext}^{Min}\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[
f(u_{vent}) =
\left\{
\begin{array}{
        &#64;{}% no padding
        l&#64;{\quad}% some padding
        r&#64;{}% no padding
        &gt;{{}}r&#64;{}% no padding
        &gt;{{}}l&#64;{}% no padding
}
        1- \dfrac{u_{vent}}{u_{vent}^{Max}},&amp; u_{vent} &amp;&lt; u_{vent}^{Max} \\
        0,&amp; u_{vent} &amp;\geq u_{vent}^{Max}
\end{array}
\right.
\]</div></div>
<div class="section" id="supplementary-lighting">
<h2>Supplementary lighting<a class="headerlink" href="#supplementary-lighting" title="Permalink to this headline">¶</a></h2>
<p>The most popular lamp type for commercial supplementary lighting in horticulture is high
pressure sodium (HPS) lamps. HPS lamps are the most efficient in the PAR spectrum range,
with an emission highly concentrated between 500 and 650 nm. HPS lighting is not designed
for frequent cycling because it dramatically reduces lamp lifespan. Thus, regardless of the
control method, it is best to set up constraints to operate lighting for extended periods. The
implemented control strategy for the lighting is based on the following:</p>
<ul class="simple">
<li><em>Lighting window</em>: allow lights to be turned on between <span class="math notranslate nohighlight">\(h_{illu,ON}^{min}\)</span> and <span class="math notranslate nohighlight">\(h_{illu,ON}^{max}\)</span> (e.g. 5 AM and 10 PM).</li>
<li><em>Lighting set-point</em>: allow lights to be turned on during the lighting window if light levels decrease below <span class="math notranslate nohighlight">\(I_{illu,ON}\)</span> (e.g. 40 Wm-2) and to be turned off when light levels increase above <span class="math notranslate nohighlight">\(I_{illu,OFF}\)</span> (e.g. 120 Wm-2).</li>
<li><em>Light accumulation</em>: turn off lights or do not allow turning them on if the daily accumulated light exceeds <span class="math notranslate nohighlight">\(I_{acc}^{max}\)</span> (e.g. 5 kWh).</li>
<li><em>Proving time</em>: light levels must be below the set-point for at least <span class="math notranslate nohighlight">\(t_{illu,proving}\)</span> (e.g. 30 minutes).</li>
<li><em>Minimum on time</em>: to prevent cycling, lights must remain on for minimum <span class="math notranslate nohighlight">\(t_{illu,ON}^{min}\)</span> (e.g. 2 hours) once they are turned on, regardless of other conditions.</li>
</ul>
<p>The strategy sets up a time window for lighting, during which a lighting set-point condition is
applied. The proving time and minimum on time strategies are implemented to prevent
cycling.</p>
</div>
<div class="section" id="windows-aperture">
<h2>Windows aperture<a class="headerlink" href="#windows-aperture" title="Permalink to this headline">¶</a></h2>
<p>Windows in the greenhouse can be opened either for dehumidification or for cooling the
greenhouse. Excessive humidity can cause fungal diseases or physiological disorders <a class="reference internal" href="index.html#grange-review-1987" id="id8">[GH87]</a>.
Humidity in greenhouses is controlled by means of a strategy related to a
constraint rather than a specific set-point. The constraint is based on
allowing a maximum value of relative humidity in the air, commonly set at 85%. The most
common technique for dehumidification is the combination of ventilation and heating.
Although this technique is energy consuming and thus expensive, dehumidifying systems
based on refrigerant cycles, e.g. heat pumps, have not proved to be economically feasible
<a class="reference internal" href="index.html#urban-production-2010" id="id9">[UU10]</a>. Windows are also used for cooling the air in the case of excessive
temperatures, since they have a negative impact on the harvest rate. For example, in
<a class="reference internal" href="index.html#vanthoor-methodology-2011-crop" id="id10">[VdVSvH11]</a> the harvest rate at daylight temperatures of 40ºC was 54.5% of that at 25ºC.
Moreover, temperatures above 25ºC can penalize fruit quality e.g. size and color <a class="reference internal" href="index.html#urban-production-2010" id="id11">[UU10]</a>. In this work, a proportional (P) controller is used to select the opening of the windows according to the following:</p>
<ul class="simple">
<li><em>Air sanitation</em>: A maximum value <span class="math notranslate nohighlight">\(RH_{vent,ON}\)</span> is allowed for humidity.</li>
<li><em>Air cooling</em>: A maximum value <span class="math notranslate nohighlight">\(T_{vent,ON}\)</span> is allowed for air temperature.</li>
</ul>
</div>
<div class="section" id="thermal-screen-closure">
<h2>Thermal screen closure<a class="headerlink" href="#thermal-screen-closure" title="Permalink to this headline">¶</a></h2>
<p>As previously mentioned, thermal losses to the outside can be reduced from 38% to 60% by
using a thermal screen <a class="reference internal" href="index.html#bailey-control-1988" id="id12">[Bai88]</a>. This capability of reducing thermal losses is defined by
the screen material, which is selected according to the climate of the region. In fact,
depending on the nature of the screen, the light transmission coefficient can vary from 15% to
88%. Thus, when drawn, the screen reduces considerably the transmitted light above the
canopy. The most conventional method to operate the screen is therefore to deploy it at
sunset, when heating demand becomes significant, and remove it at sunrise, to profit from the
available sun light. The removal of the screen must be operated progressively to avoid a
thermal shock. A way of further reducing energy consumption is to deploy the screen before
sunset or to delay the removal until after sunrise. However, this implies a loss of crop
production caused by a reduction on the available light. A good approach would be to study
the threshold between energy saving and production loss in order to define the optimal
deployment and removing times. However, estimating the reduction of plant growth is a
complex task that, although it has been the object of some studies (e.g. <a class="reference internal" href="index.html#aaslyng-intelligrow-2003" id="id13">[ALER03]</a>;
<a class="reference internal" href="index.html#bailey-control-1988" id="id14">[Bai88]</a>), it commonly has many uncertainties and thereby requires many assumptions. A
simpler approach is to define the deployment of the screen in function of the outside
irradiation. In fact, the photosynthetic activity of the plant achieves its maximal potential
about one hour after sunrise and diminishes just before sunset <a class="reference internal" href="index.html#grisey-serres-2007" id="id15">[GB07]</a>. In
Dutch-conditions, deploying the screen after 50 Wm-2 (instead of 5 Wm-2 usually practiced)
allows to decrease energy consumption by an extra 3% without penalizing crop growth
<a class="reference internal" href="index.html#dieleman-energy-2006-1" id="id16">[DK06]</a>. Depending on the night, a small temporary opening of the
screen may be necessary to regulate humidity or temperature. As defined by the ventilation rate through the screen xx ,
screen gaps increase the air exchange between the main and top air zones and therefore
decrease temperature and humidity.</p>
<p>In this work, the developed screen control strategy is based on the following:</p>
<ul class="simple">
<li><em>Opening/closing set-point</em>: the screen is opened (closed) if irradiation increases (decreases) above (below) a certain value <span class="math notranslate nohighlight">\(I_{Scr,ON}\)</span> (<span class="math notranslate nohighlight">\(I_{Scr,OFF}\)</span>) (e.g. 35 Wm-2).</li>
<li><em>Opening/closing time</em>: the screen is opened progressively by 1% per minute (with an interval pause of 3 minutes) followed by a full opening after 30%. This approach has proven not to generate cold air flows on top of the canopy <a class="reference internal" href="index.html#grisey-serres-2007" id="id17">[GB07]</a>. The opening percentage and pause time is adapted to the outside weather. The time to fully open the screen is about 45 min to 60 min in cold days and 30 min in mild days.</li>
<li><em>Humidity gap</em>: the screen is opened in steps of 1% (with an interval of 3 min) up to a maximum of 4% if relative humidity exceeds its set-point, as recommended in <a class="reference internal" href="index.html#dieleman-energy-2006-1" id="id18">[DK06]</a>.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flows.html" class="btn btn-neutral" title="Flows" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Queralt Altes-Buch.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>